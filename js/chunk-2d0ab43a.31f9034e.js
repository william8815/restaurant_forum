(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(s,t,e){"use strict";e.r(t);var r=function(){var s=this,t=s._self._c;return t("div",{staticClass:"album py-5 bg-light"},[t("div",{staticClass:"container"},[t("UserProfileCard",{attrs:{user:s.user,initial_isFollowed:s.isFollowed,iscurrentUser:s.currentUser.id===s.user.id}}),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4"},[t("UserFollowingsCard",{attrs:{user_followings:s.user.Followings}}),t("br"),t("UserFollowersCard",{attrs:{user_followers:s.user.Followers}})],1),t("div",{staticClass:"col-md-8"},[t("UserCommentsCard",{attrs:{user_comment:s.user.Comments}}),t("br"),t("UserFavoritedRestaurantsCard",{attrs:{user_FavoritedRestaurants:s.user.FavoritedRestaurants}})],1)])],1)])},a=[],i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"card mb-3"},[t("div",{staticClass:"row no-gutters"},[t("div",{staticClass:"col-md-4"},[t("img",{attrs:{src:s._f("emptyImage")(s.user.image),width:"300px",height:"300px"}})]),t("div",{staticClass:"col-md-8"},[t("div",{staticClass:"card-body"},[t("h5",{staticClass:"card-title"},[s._v(s._s(s.user.name))]),t("p",{staticClass:"card-text"},[s._v(s._s(s.user.email))]),t("ul",{staticClass:"list-unstyled list-inline"},[t("li",[t("strong",[s._v(s._s(s.user.Comments.length))]),s._v(" 已評論餐廳 ")]),t("li",[t("strong",[s._v(s._s(s.user.FavoritedRestaurants.length))]),s._v(" 收藏的餐廳 ")]),t("li",[t("strong",[s._v(s._s(s.user.Followers.length))]),s._v(" followings (追蹤者) ")]),t("li",[t("strong",[s._v(s._s(s.user.Followings.length))]),s._v(" followers (追隨者) ")])]),s.iscurrentUser?[t("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"user-edit",params:{id:s.user.id}}}},[s._v(" Edit ")])]:[s.isFollowed?t("button",{staticClass:"btn btn-danger",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),s.cancelFollow(s.user.id)}}},[s._v(" 取消追蹤 ")]):t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),s.addFollow(s.user.id)}}},[s._v(" 追蹤 ")])]],2)])])])},o=[],l=(e("d9e2"),e("e0f9")),n=e("4cce"),d=e("1635"),u={mixins:[l["a"]],props:{user:{required:!0,type:Object},initial_isFollowed:{required:!0,type:Boolean},iscurrentUser:{type:Boolean,required:!0}},data(){return{isFollowed:this.initial_isFollowed}},methods:{async addFollow(s){try{const{data:t}=await n["a"].addFollowing({userId:s});if("success"!==t.status)throw new Error(t.message);this.isFollowed=!0}catch(t){console.log(t),d["a"].fire({icon:"error",title:"追蹤失敗"})}},async cancelFollow(s){try{const{data:t}=await n["a"].deleteFollowing({userId:s});if("success"!==t.status)throw new Error(t.message);this.isFollowed=!1}catch(t){console.log(t),d["a"].fire({icon:"error",title:"追蹤失敗"})}}},watch:{initial_isFollowed(s){this.isFollowed=s}}},c=u,m=e("2877"),_=Object(m["a"])(c,i,o,!1,null,null,null),w=_.exports,v=function(){var s=this,t=s._self._c;return t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("strong",[s._v(s._s(s.user_followings.length))]),s._v(" followings (追蹤者) ")]),t("div",{staticClass:"card-body"},s._l(s.user_followings,(function(e){return t("router-link",{key:e.id,attrs:{to:{name:"user-profile",params:{id:e.id}}}},[t("img",{staticClass:"avatar",attrs:{src:s._f("emptyImage")(e.image),width:"60",height:"60"}})])})),1)])},g=[],h={mixins:[l["a"]],props:{user_followings:{type:Array,required:!0}},data(){return{followings:this.user_followings}}},f=h,p=Object(m["a"])(f,v,g,!1,null,null,null),C=p.exports,F=function(){var s=this,t=s._self._c;return t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("strong",[s._v(s._s(s.user_followers.length))]),s._v(" followers (追隨者) ")]),t("div",{staticClass:"card-body"},s._l(s.user_followers,(function(e){return t("router-link",{key:e.id,attrs:{to:{name:"user-profile",params:{id:e.id}}}},[t("img",{staticClass:"avatar",attrs:{src:s._f("emptyImage")(e.image),width:"60",height:"60"}})])})),1)])},y=[],b={mixins:[l["a"]],props:{user_followers:{type:Array,required:!0}},data(){return{followers:this.user_followers}}},U=b,R=Object(m["a"])(U,F,y,!1,null,null,null),k=R.exports,x=function(){var s=this,t=s._self._c;return t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("strong",[s._v(s._s(s.user_comment.length))]),s._v(" 已評論餐廳 ")]),t("div",{staticClass:"card-body"},s._l(s.user_comment,(function(s){return t("router-link",{key:s.id,attrs:{to:{name:"restaurant",params:{id:s.RestaurantId}}}},[t("img",{staticClass:"avatar",attrs:{src:s.Restaurant.image,width:"60",height:"60"}})])})),1)])},j=[],O={props:{user_comment:{type:Array,required:!0}},data(){return{comments:this.user_comment}}},q=O,I=Object(m["a"])(q,x,j,!1,null,null,null),A=I.exports,P=function(){var s=this,t=s._self._c;return t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("strong",[s._v(s._s(s.user_FavoritedRestaurants.length))]),s._v(" 收藏的餐廳 ")]),t("div",{staticClass:"card-body"},s._l(s.user_FavoritedRestaurants,(function(s){return t("router-link",{key:s.id,attrs:{to:{name:"restaurant",params:{id:s.id}}}},[t("img",{staticClass:"avatar",attrs:{src:s.image,width:"60",height:"60"}})])})),1)])},E=[],B={props:{user_FavoritedRestaurants:{type:Array,required:!0}},data(){return{favoriteRestaurant:this.user_FavoritedRestaurants}}},D=B,J=Object(m["a"])(D,P,E,!1,null,null,null),$=J.exports,z=e("2f62"),G={components:{UserProfileCard:w,UserFollowingsCard:C,UserFollowersCard:k,UserCommentsCard:A,UserFavoritedRestaurantsCard:$},data(){return{user:{id:-1,name:"",email:"",image:"",Comments:[],FavoritedRestaurants:[],Followers:[],Followings:[]},isFollowed:!1}},computed:{...Object(z["b"])(["currentUser"])},beforeRouteUpdate(s,t,e){const{id:r}=s.params;this.fetchUser(r),e()},created(){const{id:s}=this.$route.params;this.fetchUser(s)},methods:{async fetchUser(s){try{const{data:t}=await n["a"].get({userId:s});console.log(this.user.id,this.currentUser.id),console.log(t);const{profile:e,isFollowed:r}=t,{id:a,name:i,email:o,image:l,Comments:d,FavoritedRestaurants:u,Followers:c,Followings:m}=e;this.user={id:a,name:i,email:o,image:l,Comments:d,FavoritedRestaurants:u,Followers:c,Followings:m},this.isFollowed=r}catch(t){console.log(t),d["a"].fire({icon:"error",title:"請求使用者資料失敗"})}}}},H=G,K=Object(m["a"])(H,r,a,!1,null,null,null);t["default"]=K.exports}}]);
//# sourceMappingURL=chunk-2d0ab43a.31f9034e.js.map